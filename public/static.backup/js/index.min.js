var Particle=function(){function t(t,e,i,s){this.angle=10,this.speed=s,this.b=0,this.x=t,this.y=e,this.angle=i,this.size=15*Math.random()+15}return Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),t.prototype.linear=function(t){return Math.tan(this.angle*Math.PI/180)*t+this.b},t}(),Particles=function(){function t(t,e,i,s){void 0===s&&(s=20),this.ctx=e,this.last=0,e.canvas.width=this.ctx.canvas.offsetWidth,e.canvas.height=this.ctx.canvas.offsetHeight,e.globalCompositeOperation="destination-over",this.particle=new Array(i);for(var n=0;n<this.particle.length;n++)this.particle[n]=new Particle(Math.random()*e.canvas.width,Math.random()*e.canvas.height,360*Math.random(),s);this.figure=new Image,this.figure.src=t,this.run=!1}return t.prototype.draw=function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var e=0;e<this.particle.length;e++){this.particle[e].x+this.particle[e].size>this.ctx.canvas.width?(this.particle[e].x=this.ctx.canvas.width-this.particle[e].size,this.particle[e].angle*=-1,this.particle[e].angle+=180):this.particle[e].x<0&&(this.particle[e].x=0,this.particle[e].angle*=-1,this.particle[e].angle+=180),this.particle[e].y+this.particle[e].size>this.ctx.canvas.height?(this.particle[e].y=this.ctx.canvas.height-this.particle[e].size,this.particle[e].angle*=-1):this.particle[e].y<0&&(this.particle[e].y=0,this.particle[e].angle*=-1);var i=this.particle[e].speed*(t/1e3)*Math.cos(this.particle[e].angle*Math.PI/180),s=this.particle[e].linear(i);this.particle[e].x+=i,this.particle[e].y+=s,this.ctx.drawImage(this.figure,this.particle[e].x,this.particle[e].y,this.particle[e].size,this.particle[e].size)}},t.prototype.stop=function(){this.run=!1},t.prototype.start=function(){this.run=!0,this.last=0,this.animate()},t.prototype.animate=function(t){var e=this;void 0===t&&(t=0);var i=t-this.last;this.run?(i<1e3&&this.draw(i),this.last=performance.now(),requestAnimationFrame(function(t){return e.animate(t)})):this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},t.prototype.update=function(){this.ctx.canvas.width=this.ctx.canvas.offsetWidth,this.ctx.canvas.height=this.ctx.canvas.offsetHeight},t}();let View1,View2,canvas1=document.getElementById("particles1"),canvas2=document.getElementById("particles2"),section=document.querySelector(".hero"),ctx1=canvas1.getContext("2d"),ctx2=canvas2.getContext("2d"),particle_img=section.dataset.particleImg;function Controller(){this.isActive=!1,this.init=function(){this.isActive=!0,View1=new Particles(particle_img,ctx1,3,15),View2=new Particles(particle_img,ctx2,7,30),this.start()},this.start=function(){View1.start(),View2.start()},this.stop=function(){!0===this.isActive&&(this.isActive=!1,View1.stop(),View2.stop())},this.update=function(){View1.update(),View2.update()}}let Ctr=new Controller;document.documentElement.clientWidth>=1025&&Ctr.init(),window.addEventListener("resize",function(){document.documentElement.clientWidth<1025?Ctr.isActive&&Ctr.stop():(Ctr.update(),Ctr.isActive||Ctr.init())});var rellax=new Rellax(".guests__layer",{center:!0}),index__slider=new Swiper(".tickets__swiper-container",{speed:1e3,centeredSlides:!0,slidesPerView:"auto",initialSlide:2,effect:"coverflow",coverflowEffect:{rotate:0,stretch:90},roundLengths:!0,slideToClickedSlide:!0,navigation:{nextEl:".tickets__button--next",prevEl:".tickets__button--prev"},breakpoints:{767:{speed:250,spaceBetween:25,initialSlide:0,effect:"slide"}}}),TicketPrice=function(){var t=/\B(?=(\d{3})+(?!\d))/g;function e(t){this.form=t,this.first_payment=this.commission_k=this.payments_count=null,this.price_elms_cls="js-ticket__price",this.buying_button_cls="js-ticket__button--buying",this.installment_button_cls="js-ticket__button--installment",this.installment_enabled=!0,this.init()}e.prototype.init=function(){var t;(t=this.form.elements).first_payment&&t.commission_k&&t.payments_count?(this.first_payment=parseFloat(t.first_payment.value),this.commission_k=parseFloat(t.commission_k.value),this.payments_count=parseFloat(t.payments_count.value)):this.installment_enabled=!1,this.togglerObserver(),this.setTotals()};var i=function(t){return function(e){this.dataset.price=this.checked?this.dataset.priceOn:this.dataset.priceOff,t.setTotals()}};function s(e){return Math.ceil(e).toString().replace(t,"&#8201;")+" ₴"}return e.prototype.togglerObserver=function(){for(var t,e=0,s=this.form.querySelectorAll("."+this.price_elms_cls+'[type="checkbox"]'),n=s.length;e<n;e++)(t=s[e]).dataset.price=t.checked?t.dataset.priceOn:t.dataset.priceOff,t.addEventListener("change",i(this))},e.prototype.setTotals=function(){for(var t,e=0,i=this.form.querySelectorAll("."+this.price_elms_cls),n=i.length,a=0;e<n;e++)a+=parseFloat(i[e].dataset.price||0);this.form.querySelector("."+this.buying_button_cls+" b").innerHTML=s(a),this.installment_enabled&&(t=function(t,e,i,s){return(t*s-e)/i}(a,this.first_payment,this.payments_count,this.commission_k),this.form.querySelector("."+this.installment_button_cls+" b").innerHTML=s(t)+" / мес")},e}();!function(){for(var t=0,e=document.querySelector(".tickets__list").getElementsByTagName("form"),i=e.length;t<i;t++)new TicketPrice(e[t])}(),function(){var t,e,i=0;function s(){var t,e,i=0,s=this.dataset.id;for(t=(e=document.getElementsByClassName("js-toggler-"+s)).length;i<t;i++)e[i].classList.toggle("toggler--disabled")}for(t=(e=document.getElementsByClassName("js-toggler")).length;i<t;i++)e[i].addEventListener("change",s)}();