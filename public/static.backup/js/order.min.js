!function(e){if(e){var t=!0,n="steps__step--active",s="steps__step--current",a=e.elements.phone;a&&(mask=new IMask(a,phoneMask));var r,i=new Validation(e,{parent_selector:".form__line",cls_warning:"form__line--warning",cls_danger:"form__line--danger",cls_hint:"form__line--hint",cls_mistake:"form__mistake",requiredPassed:(r=!0,function(){r&&(o(),r=!1)})});!function(){e.elements.length}(),e.addEventListener("submit",function(e){if(e.preventDefault(),t){var n,s=this.elements.phone;s&&(n=s.value,a.value=mask.unmaskedValue),t=!1,function(e,t,n){var s=new XMLHttpRequest,a=e.querySelector('[type="submit"]');a.disabled=!0;var r=new FormData(e);s.addEventListener("load",function(r){a.disabled=!1;var i=JSON.parse(s.responseText);4==s.readyState&&"200"==s.status?t(e,i):n&&n(e,i)}),s.addEventListener("error",function(t){n&&n(e)}),s.open("POST",e.action,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(r)}(this,l,c),s.value=n}return!1})}function o(){var e;(e=document.querySelector("."+s)).classList.remove(s),e.classList.add(n),e.nextElementSibling.classList.add(s)}function l(e,t){t["alert-type"]&&"success"==t["alert-type"]&&(o(),window.location.hash="#success",(new SmoothScroll).animateScroll(0))}function c(e,n){if(n){var s=n.errors;if(s)for(var a in s)s.hasOwnProperty(a)&&i.flash(a,s[a].pop())}t=!0}}(document.forms.order),tabby.init();